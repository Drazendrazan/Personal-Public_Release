(()=>{var Rr=Object.create;var ee=Object.defineProperty;var Pr=Object.getOwnPropertyDescriptor;var Ar=Object.getOwnPropertyNames;var Mr=Object.getPrototypeOf,Ur=Object.prototype.hasOwnProperty;var De=e=>ee(e,"__esModule",{value:!0});var p=(e,r)=>()=>(e&&(r=e(e=0)),r);var I=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Or=(e,r)=>{for(var t in r)ee(e,t,{get:r[t],enumerable:!0})},Ee=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Ar(r))!Ur.call(e,o)&&(t||o!=="default")&&ee(e,o,{get:()=>r[o],enumerable:!(n=Pr(r,o))||n.enumerable});return e},V=(e,r)=>Ee(De(ee(e!=null?Rr(Mr(e)):{},"default",!r&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Tr=(e=>(r,t)=>e&&e.get(r)||(t=Ee(De({}),r,1),e&&e.set(r,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var d=(e,r,t)=>new Promise((n,o)=>{var a=i=>{try{l(t.next(i))}catch(c){o(c)}},s=i=>{try{l(t.throw(i))}catch(c){o(c)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then(a,s);l((t=t.apply(e,r)).next())});var pe=I(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.uuidV4=q.RegisterNuiCB=void 0;var Br=(e,r)=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,r)};q.RegisterNuiCB=Br;var Lr=(e,r,t)=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let o=Math.random()*16|0;return(n=="x"?o:o&3|8).toString(16)});q.uuidV4=Lr});var je=I($=>{"use strict";var Dr=$&&$.__awaiter||function(e,r,t,n){function o(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{c(n.next(f))}catch(C){s(C)}}function i(f){try{c(n.throw(f))}catch(C){s(C)}}function c(f){f.done?a(f.value):o(f.value).then(l,i)}c((n=n.apply(e,r||[])).next())})};Object.defineProperty($,"__esModule",{value:!0});$.ClientUtils=void 0;var Er=pe(),Ge=class{constructor(r){this._settings={promiseTimeout:15e3,debugMode:!1},this.setSettings(r)}debugLog(...r){!this._settings.debugMode||console.log("^1[ClUtils]^0",...r)}setSettings(r){this._settings=Object.assign(Object.assign({},this._settings),r)}emitNetPromise(r,t){return new Promise((n,o)=>{let a=!1;setTimeout(()=>{a=!0,o(`${r} has timed out after ${this._settings.promiseTimeout} ms`)},this._settings.promiseTimeout);let s=Er.uuidV4(),l=`${r}:${s}`;emitNet(r,l,t);let i=c=>{removeEventListener(l,i),!a&&n(c)};onNet(l,i)})}registerNuiProxy(r){RegisterNuiCallbackType(r),on(`__cfx_nui:${r}`,(t,n)=>Dr(this,void 0,void 0,function*(){this.debugLog(`NUICallback processed: ${r}`),this.debugLog("NUI CB Data:",t);try{let o=yield this.emitNetPromise(r,t);n(o)}catch(o){console.error("Error encountered while listening to resp. Error:",o),n({err:o})}}))}registerRPCListener(r,t){onNet(r,(n,o)=>{this.debugLog(`RPC called: ${r}`),Promise.resolve(t(o)).then(a=>{this.debugLog("RPC Data:",o),emitNet(n,a)}).catch(a=>{console.error(`RPC Error in ${r}, ERR: ${a.message}`)})})}};$.ClientUtils=Ge});var qe=I(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.ClientLogger=void 0;var Ve=class{constructor(r){this._settings={minLevel:"debug",prefix:void 0,colorizeAll:!0},this._defaultColorMap={error:"^1",trace:"^9",info:"^4",debug:"^2",warn:"^8",fatal:"^6",silly:"^5"},this._logLevels=["silly","trace","debug","info","warn","error","fatal"],this._settings=Object.assign(Object.assign({},this._settings),r)}getPrefix(){return this._settings.prefix||""}info(...r){this._handleLogOut("info",r)}error(...r){this._handleLogOut("error",r)}debug(...r){this._handleLogOut("debug",r)}silly(...r){this._handleLogOut("silly",r)}warn(...r){this._handleLogOut("warn",r)}fatal(...r){this._handleLogOut("fatal",r)}_handleLogOut(r,t){this._logLevels.indexOf(r)>=this._logLevels.indexOf(this._settings.minLevel)&&this._buildAndWriteOutLog(r,t)}_buildAndWriteOutLog(r,t){let n=this._settings.prefix?`[${this.getPrefix()}]`:"";n+=`${this._defaultColorMap[r]}[${r.toUpperCase()}]`,this._settings.colorizeAll||(n+="^0"),console.log(n,...t)}};te.ClientLogger=Ve});var $e=I(S=>{"use strict";var Gr=S&&S.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),me=S&&S.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Gr(r,e,t)};Object.defineProperty(S,"__esModule",{value:!0});me(pe(),S);me(je(),S);me(qe(),S)});var Fe=I(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.ServerStatus=P.ServerErrorCodes=void 0;var jr;(function(e){e.UnknownError="UNKNOWN_ERROR",e.TimedOut="TIMED_OUT",e.NotAllowed="NOT_ALLOWED",e.ServerError="SERVER_ERROR",e.InvalidData="INVALID_DATA"})(jr=P.ServerErrorCodes||(P.ServerErrorCodes={}));var Vr;(function(e){e.OK="ok",e.Error="error"})(Vr=P.ServerStatus||(P.ServerStatus={}))});var ge=I(D=>{"use strict";var qr=D&&D.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$r=D&&D.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&qr(r,e,t)};Object.defineProperty(D,"__esModule",{value:!0});$r(Fe(),D)});function H(){if(!re&&(re=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!re))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return re(Fr)}var re,Fr,he=p(()=>{Fr=new Uint8Array(16)});var ke,He=p(()=>{ke=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function kr(e){return typeof e=="string"&&ke.test(e)}var A,W=p(()=>{He();A=kr});function Hr(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(h[e[r+0]]+h[e[r+1]]+h[e[r+2]]+h[e[r+3]]+"-"+h[e[r+4]]+h[e[r+5]]+"-"+h[e[r+6]]+h[e[r+7]]+"-"+h[e[r+8]]+h[e[r+9]]+"-"+h[e[r+10]]+h[e[r+11]]+h[e[r+12]]+h[e[r+13]]+h[e[r+14]]+h[e[r+15]]).toLowerCase();if(!A(t))throw TypeError("Stringified UUID is invalid");return t}var h,ne,M,Z=p(()=>{W();h=[];for(ne=0;ne<256;++ne)h.push((ne+256).toString(16).substr(1));M=Hr});function Wr(e,r,t){var n=r&&t||0,o=r||new Array(16);e=e||{};var a=e.node||We,s=e.clockseq!==void 0?e.clockseq:ye;if(a==null||s==null){var l=e.random||(e.rng||H)();a==null&&(a=We=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),s==null&&(s=ye=(l[6]<<8|l[7])&16383)}var i=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:be+1,f=i-ve+(c-be)/1e4;if(f<0&&e.clockseq===void 0&&(s=s+1&16383),(f<0||i>ve)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ve=i,be=c,ye=s,i+=122192928e5;var C=((i&268435455)*1e4+c)%4294967296;o[n++]=C>>>24&255,o[n++]=C>>>16&255,o[n++]=C>>>8&255,o[n++]=C&255;var g=i/4294967296*1e4&268435455;o[n++]=g>>>8&255,o[n++]=g&255,o[n++]=g>>>24&15|16,o[n++]=g>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(var _=0;_<6;++_)o[n+_]=a[_];return r||M(o)}var We,ye,ve,be,Ze,ze=p(()=>{he();Z();ve=0,be=0;Ze=Wr});function Zr(e){if(!A(e))throw TypeError("Invalid UUID");var r,t=new Uint8Array(16);return t[0]=(r=parseInt(e.slice(0,8),16))>>>24,t[1]=r>>>16&255,t[2]=r>>>8&255,t[3]=r&255,t[4]=(r=parseInt(e.slice(9,13),16))>>>8,t[5]=r&255,t[6]=(r=parseInt(e.slice(14,18),16))>>>8,t[7]=r&255,t[8]=(r=parseInt(e.slice(19,23),16))>>>8,t[9]=r&255,t[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=r/4294967296&255,t[12]=r>>>24&255,t[13]=r>>>16&255,t[14]=r>>>8&255,t[15]=r&255,t}var oe,we=p(()=>{W();oe=Zr});function zr(e){e=unescape(encodeURIComponent(e));for(var r=[],t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}function ae(e,r,t){function n(o,a,s,l){if(typeof o=="string"&&(o=zr(o)),typeof a=="string"&&(a=oe(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+o.length);if(i.set(a),i.set(o,a.length),i=t(i),i[6]=i[6]&15|r,i[8]=i[8]&63|128,s){l=l||0;for(var c=0;c<16;++c)s[l+c]=i[c];return s}return M(i)}try{n.name=e}catch{}return n.DNS=Kr,n.URL=Yr,n}var Kr,Yr,Ce=p(()=>{Z();we();Kr="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Yr="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Jr(e){if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=new Uint8Array(r.length);for(var t=0;t<r.length;++t)e[t]=r.charCodeAt(t)}return Xr(Qr(en(e),e.length*8))}function Xr(e){for(var r=[],t=e.length*32,n="0123456789abcdef",o=0;o<t;o+=8){var a=e[o>>5]>>>o%32&255,s=parseInt(n.charAt(a>>>4&15)+n.charAt(a&15),16);r.push(s)}return r}function Ke(e){return(e+64>>>9<<4)+14+1}function Qr(e,r){e[r>>5]|=128<<r%32,e[Ke(r)-1]=r;for(var t=1732584193,n=-271733879,o=-1732584194,a=271733878,s=0;s<e.length;s+=16){var l=t,i=n,c=o,f=a;t=y(t,n,o,a,e[s],7,-680876936),a=y(a,t,n,o,e[s+1],12,-389564586),o=y(o,a,t,n,e[s+2],17,606105819),n=y(n,o,a,t,e[s+3],22,-1044525330),t=y(t,n,o,a,e[s+4],7,-176418897),a=y(a,t,n,o,e[s+5],12,1200080426),o=y(o,a,t,n,e[s+6],17,-1473231341),n=y(n,o,a,t,e[s+7],22,-45705983),t=y(t,n,o,a,e[s+8],7,1770035416),a=y(a,t,n,o,e[s+9],12,-1958414417),o=y(o,a,t,n,e[s+10],17,-42063),n=y(n,o,a,t,e[s+11],22,-1990404162),t=y(t,n,o,a,e[s+12],7,1804603682),a=y(a,t,n,o,e[s+13],12,-40341101),o=y(o,a,t,n,e[s+14],17,-1502002290),n=y(n,o,a,t,e[s+15],22,1236535329),t=v(t,n,o,a,e[s+1],5,-165796510),a=v(a,t,n,o,e[s+6],9,-1069501632),o=v(o,a,t,n,e[s+11],14,643717713),n=v(n,o,a,t,e[s],20,-373897302),t=v(t,n,o,a,e[s+5],5,-701558691),a=v(a,t,n,o,e[s+10],9,38016083),o=v(o,a,t,n,e[s+15],14,-660478335),n=v(n,o,a,t,e[s+4],20,-405537848),t=v(t,n,o,a,e[s+9],5,568446438),a=v(a,t,n,o,e[s+14],9,-1019803690),o=v(o,a,t,n,e[s+3],14,-187363961),n=v(n,o,a,t,e[s+8],20,1163531501),t=v(t,n,o,a,e[s+13],5,-1444681467),a=v(a,t,n,o,e[s+2],9,-51403784),o=v(o,a,t,n,e[s+7],14,1735328473),n=v(n,o,a,t,e[s+12],20,-1926607734),t=b(t,n,o,a,e[s+5],4,-378558),a=b(a,t,n,o,e[s+8],11,-2022574463),o=b(o,a,t,n,e[s+11],16,1839030562),n=b(n,o,a,t,e[s+14],23,-35309556),t=b(t,n,o,a,e[s+1],4,-1530992060),a=b(a,t,n,o,e[s+4],11,1272893353),o=b(o,a,t,n,e[s+7],16,-155497632),n=b(n,o,a,t,e[s+10],23,-1094730640),t=b(t,n,o,a,e[s+13],4,681279174),a=b(a,t,n,o,e[s],11,-358537222),o=b(o,a,t,n,e[s+3],16,-722521979),n=b(n,o,a,t,e[s+6],23,76029189),t=b(t,n,o,a,e[s+9],4,-640364487),a=b(a,t,n,o,e[s+12],11,-421815835),o=b(o,a,t,n,e[s+15],16,530742520),n=b(n,o,a,t,e[s+2],23,-995338651),t=w(t,n,o,a,e[s],6,-198630844),a=w(a,t,n,o,e[s+7],10,1126891415),o=w(o,a,t,n,e[s+14],15,-1416354905),n=w(n,o,a,t,e[s+5],21,-57434055),t=w(t,n,o,a,e[s+12],6,1700485571),a=w(a,t,n,o,e[s+3],10,-1894986606),o=w(o,a,t,n,e[s+10],15,-1051523),n=w(n,o,a,t,e[s+1],21,-2054922799),t=w(t,n,o,a,e[s+8],6,1873313359),a=w(a,t,n,o,e[s+15],10,-30611744),o=w(o,a,t,n,e[s+6],15,-1560198380),n=w(n,o,a,t,e[s+13],21,1309151649),t=w(t,n,o,a,e[s+4],6,-145523070),a=w(a,t,n,o,e[s+11],10,-1120210379),o=w(o,a,t,n,e[s+2],15,718787259),n=w(n,o,a,t,e[s+9],21,-343485551),t=U(t,l),n=U(n,i),o=U(o,c),a=U(a,f)}return[t,n,o,a]}function en(e){if(e.length===0)return[];for(var r=e.length*8,t=new Uint32Array(Ke(r)),n=0;n<r;n+=8)t[n>>5]|=(e[n/8]&255)<<n%32;return t}function U(e,r){var t=(e&65535)+(r&65535),n=(e>>16)+(r>>16)+(t>>16);return n<<16|t&65535}function tn(e,r){return e<<r|e>>>32-r}function se(e,r,t,n,o,a){return U(tn(U(U(r,e),U(n,a)),o),t)}function y(e,r,t,n,o,a,s){return se(r&t|~r&n,e,r,o,a,s)}function v(e,r,t,n,o,a,s){return se(r&n|t&~n,e,r,o,a,s)}function b(e,r,t,n,o,a,s){return se(r^t^n,e,r,o,a,s)}function w(e,r,t,n,o,a,s){return se(t^(r|~n),e,r,o,a,s)}var Ye,Je=p(()=>{Ye=Jr});var rn,Xe,Qe=p(()=>{Ce();Je();rn=ae("v3",48,Ye),Xe=rn});function nn(e,r,t){e=e||{};var n=e.random||(e.rng||H)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(var o=0;o<16;++o)r[t+o]=n[o];return r}return M(n)}var et,tt=p(()=>{he();Z();et=nn});function an(e,r,t,n){switch(e){case 0:return r&t^~r&n;case 1:return r^t^n;case 2:return r&t^r&n^t&n;case 3:return r^t^n}}function Ie(e,r){return e<<r|e>>>32-r}function sn(e){var r=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),l=new Array(s),i=0;i<s;++i){for(var c=new Uint32Array(16),f=0;f<16;++f)c[f]=e[i*64+f*4]<<24|e[i*64+f*4+1]<<16|e[i*64+f*4+2]<<8|e[i*64+f*4+3];l[i]=c}l[s-1][14]=(e.length-1)*8/Math.pow(2,32),l[s-1][14]=Math.floor(l[s-1][14]),l[s-1][15]=(e.length-1)*8&4294967295;for(var C=0;C<s;++C){for(var g=new Uint32Array(80),_=0;_<16;++_)g[_]=l[C][_];for(var x=16;x<80;++x)g[x]=Ie(g[x-3]^g[x-8]^g[x-14]^g[x-16],1);for(var T=t[0],B=t[1],L=t[2],X=t[3],de=t[4],Q=0;Q<80;++Q){var Le=Math.floor(Q/20),Sr=Ie(T,5)+an(Le,B,L,X)+de+r[Le]+g[Q]>>>0;de=X,X=L,L=Ie(B,30)>>>0,B=T,T=Sr}t[0]=t[0]+T>>>0,t[1]=t[1]+B>>>0,t[2]=t[2]+L>>>0,t[3]=t[3]+X>>>0,t[4]=t[4]+de>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var rt,nt=p(()=>{rt=sn});var ln,ot,at=p(()=>{Ce();nt();ln=ae("v5",80,rt),ot=ln});var st,it=p(()=>{st="00000000-0000-0000-0000-000000000000"});function cn(e){if(!A(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var lt,ct=p(()=>{W();lt=cn});var ut={};Or(ut,{NIL:()=>st,parse:()=>oe,stringify:()=>M,v1:()=>Ze,v3:()=>Xe,v4:()=>et,v5:()=>ot,validate:()=>A,version:()=>lt});var ft=p(()=>{ze();Qe();tt();at();it();ct();W();Z();we()});var mt=I(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.ServerUtils=void 0;var dt=ge(),un=(ft(),Tr(ut)),pt=class{constructor(r){this._utilSettings={debugMode:!1,rpcTimeout:1e4},this._utilSettings=Object.assign(Object.assign({},this._utilSettings),r)}debugLog(...r){!this._utilSettings.debugMode||console.log("^3[SvUtils]^1",...r)}onNetPromise(r,t){onNet(r,(n,o)=>{let a=global.source,s={source:a,data:o};this.debugLog(`NetPromise received for ${r}, src: ${a}`),this.debugLog("Data:",o);let l=i=>{this.debugLog(`PromiseResp: s m  = ${a}, e = ${n}`),this.debugLog("RetData",i),emitNet(n,a,i)};Promise.resolve(t(s,l)).catch(i=>{console.error(`Error in onNetPromise (${r}), ERROR: ${i.message}`),l({status:dt.ServerStatus.Error,errorMsg:dt.ServerErrorCodes.UnknownError})})})}callClientRPC(r,t,n){return new Promise((o,a)=>{let s=!1;setTimeout(()=>{s=!0,a(`RPC Call: ${r} timed out after ${this._utilSettings.rpcTimeout} `)},this._utilSettings.rpcTimeout);let l=un.v4(),i=`${r}:${l}`;emitNet(r,t,i,n);let c=f=>{removeEventListener(i,c),!s&&o(f)};onNet(i,c)})}};ie.ServerUtils=pt});var gt=I(E=>{"use strict";var fn=E&&E.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),dn=E&&E.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&fn(r,e,t)};Object.defineProperty(E,"__esModule",{value:!0});dn(mt(),E)});var yt=I(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0})});var bt=I(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0})});var Ct=I(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0})});var It=I(R=>{"use strict";var pn=R&&R.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),_e=R&&R.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&pn(r,e,t)};Object.defineProperty(R,"__esModule",{value:!0});_e(yt(),R);_e(bt(),R);_e(Ct(),R)});var z=I(N=>{"use strict";var mn=N&&N.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),le=N&&N.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&mn(r,e,t)};Object.defineProperty(N,"__esModule",{value:!0});le($e(),N);le(gt(),N);le(ge(),N);le(It(),N)});var ce=p(()=>{});var xt,gn,m,_t,hn,xe,K,Ne=p(()=>{xt=V(z()),gn=new xt.ClientUtils({promiseTimout:200}),m=e=>{RegisterNuiCallbackType(e),on(`__cfx_nui:${e}`,(r,t)=>d(void 0,null,function*(){try{let n=yield gn.emitNetPromise(e,r);t(n)}catch(n){console.error("Error encountered while listening to resp. Error:",n),t({status:"error"})}}))},_t=e=>{let[r,t,n]=e;return{x:r,y:t,z:n}},hn=(e,r)=>{let t=e.x-r.x,n=e.y-r.y,o=e.z-r.z;return Math.sqrt(t*t+n*n+o*o)},xe=e=>{let r=PlayerId(),t=PlayerPedId(),n=GetEntityCoords(t,!1),o=GetActivePlayers(),a=_t(n),s,l;if(o.forEach(i=>{if(i===r||!n)return;let c=GetPlayerPed(i),f=GetEntityCoords(c,!1);if(!f)return;let C=_t(f),g=hn(C,a);(!l||g<l)&&(l=g,s=GetPlayerServerId(i))}),!s)return null;if(e&&e<(l!=null?l:0))throw new Error("No player nearby");return{distance:l!=null?l:1/0,source:s}},K=e=>!(!e||isNaN(Number(e))||Number(e)<=0)});var Nt,St,G,Se=p(()=>{Nt=V(z());ce();St=class{constructor(){this.utils=new Nt.ClientUtils({promiseTimout:200})}getInvoices(){return d(this,null,function*(){var r;try{let t=yield this.utils.emitNetPromise("pefcl:getInvoices",{});if(t.status!=="ok")throw new Error(t.errorMsg);return(r=t.data)!=null?r:[]}catch(t){console.error(t)}return[]})}giveCash(r,t){return d(this,null,function*(){var o;let n=yield this.utils.emitNetPromise("pefcl:giveCash",{source:r,amount:t});if(n.status!=="ok")throw new Error(n.errorMsg);return(o=n.data)!=null?o:!1})}getMyCash(){return d(this,null,function*(){try{let r=yield this.utils.emitNetPromise("pefcl:getMyCash",{});if(r.status!=="ok")throw new Error(r.errorMsg);return r.data}catch(r){console.error(r);return}})}createInvoice(r){return d(this,null,function*(){try{let t=yield this.utils.emitNetPromise("pefcl:createOnlineInvoice",r);if(t.status!=="ok")throw new Error(t.errorMsg);return t.data}catch(t){console.error(t);return}})}depositMoney(r){return d(this,null,function*(){try{let t={amount:r,message:"Deposition"},n=yield this.utils.emitNetPromise("pefcl:depositMoney",t);console.log({response:n})}catch(t){console.error(t);return}})}withdrawMoney(r){return d(this,null,function*(){try{let t={amount:r,message:"Withdrawal"},n=yield this.utils.emitNetPromise("pefcl:withdrawMoney",t);console.log({response:n})}catch(t){console.error(t);return}})}},G=new St});var u,Y=p(()=>{u=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"config.json"))});var Mt=I(Ae=>{var Re=V(z());ce();Ne();Se();Y();var Rt,wn=(Rt=u.frameworkIntegration)==null?void 0:Rt.enabled,Pe=!1;(0,Re.RegisterNuiCB)("pefcl:nuiHasLoaded",()=>{console.debug("NUI has loaded."),Pe=!0});(0,Re.RegisterNuiCB)("pefcl:nuiHasUnloaded",()=>{console.debug("NUI has unloaded."),Pe=!1});var Pt=(e=250)=>new Promise(r=>{let t=setInterval(()=>{Pe&&(r(),clearInterval(t))},e)});onNet("pefcl:newTransactionBroadcast",e=>{SendNUIMessage({type:"pefcl:newTransactionBroadcast",payload:e})});onNet("pefcl:newInvoiceBroadcast",e=>{SendNUIMessage({type:"pefcl:newInvoiceBroadcast",payload:e})});onNet("pefcl:newSharedUser",()=>{SendNUIMessage({type:"pefcl:newSharedUser"})});onNet("pefcl:removedSharedUser",()=>{SendNUIMessage({type:"pefcl:removedSharedUser"})});RegisterCommand("bank-force-load",()=>d(Ae,null,function*(){console.debug("Waiting for NUI to load .."),yield Pt(),console.debug("Loaded. Emitting data to NUI."),SendNUIMessage({type:"pefcl:userLoaded",payload:!0})}),!1);onNet("pefcl:userLoaded",()=>d(Ae,null,function*(){var e;console.debug("Waiting for NUI to load .."),yield Pt(),console.debug("Loaded. Emitting data to NUI."),SendNUIMessage({type:"pefcl:userLoaded",payload:!0}),wn||StatSetInt(At,(e=yield G.getMyCash())!=null?e:0,!0)}));onNet("pefcl:userUnloaded",()=>{SendNUIMessage({type:"pefcl:userUnloaded"})});var At=GetHashKey("MP0_WALLET_BALANCE");onNet("pefcl:updateCashBalance",e=>{StatSetInt(At,e,!0)});m("pefcl:getAccounts");m("pefcl:createAccount");m("pefcl:deleteAccount");m("pefcl:setDefaultAccount");m("pefcl:renameAccount");m("pefcl:getInvoices");m("pefcl:countUnpaid");m("pefcl:createInvoice");m("pefcl:payInvoice");m("pefcl:getTransactions");m("pefcl:getTransactionsHistory");m("pefcl:createTransfer");m("pefcl:userEventsGetUsers");m("pefcl:sharedAccountsAddUser");m("pefcl:sharedAccountsRemoveUser");m("pefcl:sharedAccountsGetUsers");m("pefcl:addExternalAccount");m("pefcl:getExternalAccount");m("pefcl:withdrawMoney");m("pefcl:depositMoney");m("pefcl:getMyCash")});var Ut=p(()=>{});var ue,fe,Ot,Tt,Me=p(()=>{Ut();Se();Ne();ue=(e,r)=>d(void 0,null,function*(){let[t]=r;if(!K(t)){console.log("Invalid amount");return}let o=xe(5);if(!o){console.log("No player nearby.");return}yield G.giveCash(o.source,Number(t)).catch(a=>{if(a.message==="InsufficentFunds"){console.log("You are too poor");return}console.log(a)})}),fe=(e,r)=>d(void 0,null,function*(){let[t,n]=r;if(!K(t)){console.log("Invalid amount");return}let a=xe(5);if(!a){console.log("No player nearby.");return}yield G.createInvoice({amount:Number(t),message:n,source:a.source})}),Ot=e=>d(void 0,null,function*(){if(!K(e)){console.log("Invalid amount");return}return yield G.depositMoney(Number(e))}),Tt=e=>d(void 0,null,function*(){if(!K(e)){console.log("Invalid amount");return}return yield G.withdrawMoney(Number(e))})});var Bt=I(J=>{Ue();Me();var O=global.exports;O("openBank",()=>d(J,null,function*(){j(!0)}));O("closeBank",()=>d(J,null,function*(){j(!1)}));O("openAtm",()=>d(J,null,function*(){F(!0)}));O("closeAtm",()=>d(J,null,function*(){F(!1)}));O("giveNearestPlayerCash",e=>{ue(0,[e])});O("createInvoiceForNearestPlayer",(e,r)=>{fe(0,[e,r])});O("depositMoney",e=>{Ot(e)});O("withdrawMoney",e=>{Tt(e)})});var Lt,Dt,Et,Cn,Gt,jt,Oe,In,Vt,qt,$t,Ft,kt=p(()=>{Ue();Y();Lt=global.exports,Cn=(Et=(Dt=u.target)==null?void 0:Dt.enabled)!=null?Et:!1,Oe=(jt=(Gt=u.target)==null?void 0:Gt.type)!=null?jt:"qtarget",In=GetResourceState(Oe)==="started";if(Cn&&In){let e=(qt=(Vt=u.target)==null?void 0:Vt.bankZones)!=null?qt:[];((Ft=($t=u.atms)==null?void 0:$t.props)!=null?Ft:[]).forEach(t=>{Lt[Oe].AddTargetModel(t,{options:[{event:"pefcl:open:atm",icon:"fas fa-money-bill-1-wave",label:"ATM"}]})}),e.forEach((t,n)=>{let o="bank_"+n;if(!t)throw new Error('Missing zone. Check your "qtarget.bankZones" config.');Lt[Oe].AddBoxZone(o,t.position,t.length,t.width,{name:o,heading:t.heading,debugPoly:!1,minZ:t.minZ,maxZ:t.maxZ},{options:[{event:"pefcl:open:bank",icon:"fas fa-building-columns",label:"Open bank"}],distance:1.5})}),AddEventHandler("pefcl:open:atm",()=>{F(!0)}),AddEventHandler("pefcl:open:bank",()=>{j(!0)})}});var Ht,Wt,_n,Zt,zt,xn,Kt,Yt,Jt,Xt,Qt,er,tr,rr,nr,or,ar,sr,ir,lr,cr,ur,fr,dr,pr,mr,gr,hr,yr,vr,br,wr,Cr,Ir,_r=p(()=>{Y();_n=(Wt=(Ht=u.bankBlips)==null?void 0:Ht.enabled)!=null?Wt:!1,xn=(zt=(Zt=u.atmBlips)==null?void 0:Zt.enabled)!=null?zt:!1;if(_n){let e=(Yt=(Kt=u.bankBlips)==null?void 0:Kt.name)!=null?Yt:"Bank",r=(Xt=(Jt=u.bankBlips)==null?void 0:Jt.colour)!=null?Xt:3,t=(er=(Qt=u.bankBlips)==null?void 0:Qt.icon)!=null?er:4,n=(rr=(tr=u.bankBlips)==null?void 0:tr.scale)!=null?rr:1,o=(or=(nr=u.bankBlips)==null?void 0:nr.coords)!=null?or:[],a=(sr=(ar=u.bankBlips)==null?void 0:ar.display)!=null?sr:4,s=(lr=(ir=u.bankBlips)==null?void 0:ir.shortRange)!=null?lr:!0;o.forEach(l=>{if(!l||!l.x||!l.y||!l.z)throw new Error('Missing blip coords. Check your "blips.coords" config.');let i=AddBlipForCoord(l.x,l.y,l.z);SetBlipDisplay(i,a),SetBlipSprite(i,t),SetBlipScale(i,n),SetBlipColour(i,r),SetBlipAsShortRange(i,s),BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e),EndTextCommandSetBlipName(i)})}if(xn){let e=(ur=(cr=u.atmBlips)==null?void 0:cr.name)!=null?ur:"ATM",r=(dr=(fr=u.atmBlips)==null?void 0:fr.colour)!=null?dr:3,t=(mr=(pr=u.atmBlips)==null?void 0:pr.icon)!=null?mr:4,n=(hr=(gr=u.atmBlips)==null?void 0:gr.scale)!=null?hr:1,o=(vr=(yr=u.atmBlips)==null?void 0:yr.coords)!=null?vr:[],a=(wr=(br=u.atmBlips)==null?void 0:br.display)!=null?wr:4,s=(Ir=(Cr=u.atmBlips)==null?void 0:Cr.shortRange)!=null?Ir:!0;o.forEach(l=>{if(!l||!l.x||!l.y||!l.z)throw new Error('Missing blip coords. Check your "blips.coords" config.');let i=AddBlipForCoord(l.x,l.y,l.z);SetBlipDisplay(i,a),SetBlipSprite(i,t),SetBlipScale(i,n),SetBlipColour(i,r),SetBlipAsShortRange(i,s),BeginTextCommandSetBlipName("STRING"),AddTextComponentString(e),EndTextCommandSetBlipName(i)})}});var Qo,ea,Nr,k,Te,xr,Be,j,F,Ue=p(()=>{Qo=V(Mt()),ea=V(Bt());kt();_r();ce();Nr=V(z());Me();Y();k=!1,Te=!1,Be=(xr=u.frameworkIntegration)==null?void 0:xr.enabled,j=e=>{Te!==e&&(Te=e,SendNUIMessage({type:"setVisible",payload:e}),SetNuiFocus(e,e))},F=e=>{k!==e&&(k=e,SendNUIMessage({type:"setVisibleATM",payload:e}),SetNuiFocus(e,e))};Be||(RegisterCommand("bank",()=>{j(!Te)},!1),RegisterCommand("atm",()=>{var x,T,B,L;let e=PlayerPedId(),[r,t,n]=GetEntityCoords(e,!1),[o,a,s]=GetOffsetFromEntityInWorldCoords(e,0,(T=(x=u.atms)==null?void 0:x.distance)!=null?T:5,0),l=StartShapeTestCapsule(r,t,n,o,a,s,.5,16,0,4),[i,c,f,C,g]=GetRaycastResult(l);if(!c)return console.log("not hit");let _=GetEntityModel(g);if(!((L=(B=u.atms)==null?void 0:B.props)!=null&&L.includes(_)))return console.log("not atm");k=!k,SendNUIMessage({type:"setVisibleATM",payload:k}),k?SetNuiFocus(!0,!0):SetNuiFocus(!1,!1)},!1));(0,Nr.RegisterNuiCB)("pefcl:closeNui",()=>d(void 0,null,function*(){j(!1),F(!1)}));Be||RegisterCommand("cash",()=>d(void 0,null,function*(){SetMultiplayerWalletCash(),setTimeout(RemoveMultiplayerWalletCash,5e3)}),!1);Be||(RegisterCommand("giveCash",ue,!1),RegisterCommand("createInvoice",fe,!1))});Ue();})();
